<?xml version="1.0" encoding="utf-8" ?>
<plugin name="rssfeed">
    <title>RssFeed Boxes</title>
    <description>Enables generating Rss Feed boxes on your website</description>
    <author>John Freeman</author>
    <owner>Flynax Classifieds Software</owner>
    <version>2.1.5</version>
    <date>10.04.2012</date>
    <compatible>4.6.0</compatible>
    <controller>rssfeed</controller>
    <class>RssFeed</class>
    
    <files>
        <file>rlRssFeed.class.php</file>
        <file>block.tpl</file>
        <file>admin/rssfeed.inc.php</file>
        <file>admin/rssfeed.tpl</file>
    </files>
    
    <install><![CDATA[
    $GLOBALS['rlDb']->createTable(
    'rss_feed',
    "`ID` int(11) PRIMARY KEY NOT NULL auto_increment,
        `Side` varchar(15) NOT NULL default '',
        `Tpl` enum('1','0') NOT NULL default '1',
        `Url` varchar(255) NOT NULL default '',
        `Date` datetime NOT NULL default '0000-00-00 00:00:00',
        `Update_delay` int(3) NOT NULL default '12',
        `Last_update` datetime NOT NULL,
        `Article_num` int(2) NOT NULL default '5',
        `Status` enum('active','approval') NOT NULL default 'active'"
    );
    ]]></install>

    <hooks>
        <hook version="2.1.5" name="cronAdditional"><![CDATA[]]></hook>
    </hooks>
    
    <phrases>
        <phrase key="add_new_rss" module="admin"><![CDATA[Add new Feed]]></phrase>
        <phrase key="edit_rss" module="admin"><![CDATA[Edit Feed]]></phrase>
        <phrase key="rssfeed_link" module="admin"><![CDATA[RSS Feed URL]]></phrase>
        <phrase key="ext_article_num" module="ext"><![CDATA[Articles number]]></phrase>
        <phrase key="article_num" module="admin"><![CDATA[Number of articles in box]]></phrase>
        <phrase key="rssfeed_ext_caption" module="ext"><![CDATA[RSS Feeds Manager]]></phrase>
        <phrase key="rssfeed_not_found" module="frontEnd"><![CDATA[No RSS feed data]]></phrase>
        <phrase version="2.1.0" key="rssfeed_article_update_delay" module="admin"><![CDATA[Box update delay]]></phrase>
        <phrase version="2.1.0" key="rssfeed_hours" module="admin"><![CDATA[hour(s)]]></phrase>
        <phrase version="2.1.0" key="rssfeed_validate" module="admin"><![CDATA[Validate]]></phrase>
        <phrase version="2.1.0" key="ext_rssfeed_bad_url" module="ext"><![CDATA[Please enter valid URL]]></phrase>
        <phrase version="2.1.0" key="rssfeed_feed_sample" module="admin"><![CDATA[Feed data sample]]></phrase>
        <phrase version="2.1.0" key="rssfeed_empty_feed" module="admin"><![CDATA[The RSS feed url you\'ve entered doesn\'t contain any articles]]></phrase>
    </phrases>
    
    <updates>
        <update version="2.1.0" files="block.tpl,rlRssFeed.class.php,admin/rssfeed.inc.php,admin/rssfeed.tpl,admin/sample.tpl"><![CDATA[
            global $rlDb, $reefless;

            $sql = "ALTER TABLE  `".RL_DBPREFIX."rss_feed` ADD  `Update_delay` INT(3) NOT NULL DEFAULT '12' AFTER `Url`";
            $rlDb -> query($sql);
            $sql = "ALTER TABLE  `".RL_DBPREFIX."rss_feed` ADD  `Last_update` DATETIME NOT NULL AFTER  `Update_delay`";
            $rlDb -> query($sql);

            $reefless -> loadClass('RssFeed', null, 'rssfeed');
            $GLOBALS['rlRssFeed'] -> updateFeeds();
        ]]></update>
        <update version="2.1.1" files="admin/rssfeed.inc.php"><![CDATA[]]></update>
        <update version="2.1.2" files="rlRssFeed.class.php,admin/rss_feed.tpl"><![CDATA[]]></update>
        <update version="2.1.3" files="block.tpl"><![CDATA[]]></update>
        <update version="2.1.4" files="rlRssFeed.class.php"><![CDATA[]]></update>
        <update version="2.1.5" files="block.tpl,rlRssFeed.class.php,.htaccess,admin/.htaccess,admin/rssfeed.inc.php,admin/rssfeed.tpl,admin/sample.tpl,static/.htaccess"><![CDATA[]]></update>
    </updates>

    <uninstall><![CDATA[
    $GLOBALS['rlDb']->dropTable('rss_feed');
    ]]></uninstall>
</plugin>
