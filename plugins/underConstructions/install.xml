<?xml version="1.0" encoding="utf-8" ?>
<plugin name="underConstructions">
    <title>Under Constructions</title>
    <description>Enables the Under Construction mode</description>
    <author>John Freeman</author>
    <owner>Flynax Classifieds Software</owner>
    <version>3.1.2</version>
    <date>28.09.2010</date>
    <class>UnderConstruction</class>
    <compatible>4.5.2</compatible>

    <files>
        <file>rlUnderConstruction.class.php</file>
        <file>content.tpl</file>
        <file>static/style.css</file>
        <file>static/do-not-cross-line.png</file>
        <file>i18n/ru.json</file>
    </files>

    <install><![CDATA[
        $GLOBALS['reefless']->loadClass('UnderConstruction', null, 'underConstructions');
        $GLOBALS['rlUnderConstruction']->install();
    ]]></install>

    <hooks>
        <hook version="3.1.0" name="boot"><![CDATA[]]></hook>
    </hooks>

    <phrases>
        <phrase version="3.1.2" key="under_constructions_h1" module="frontEnd"><![CDATA[The website is under construction]]></phrase>
        <phrase version="3.1.2" key="under_constructions_h2" module="frontEnd"><![CDATA[Estimated time remaining before official launch:]]></phrase>
        <phrase version="3.1.2" key="under_constructions_days" module="frontEnd"><![CDATA[Days]]></phrase>
        <phrase version="3.1.2" key="under_constructions_hours" module="frontEnd"><![CDATA[Hours]]></phrase>
        <phrase version="3.1.2" key="under_constructions_minutes" module="frontEnd"><![CDATA[Minutes]]></phrase>
        <phrase version="3.1.2" key="under_constructions_seconds" module="frontEnd"><![CDATA[Seconds]]></phrase>
    </phrases>

    <configs version="3.1.2" key="underConstructions" name="Under Constructions">
        <![CDATA[]]>
        <config key="under_constructions_ip" name="Allowed IP-addresses" description="For example: 127.0.0.1;198.2.25.56" type="text"><![CDATA[127.0.0.1]]></config>
        <config key="under_constructions_date" name="Date" description="Launch Date in the following format: 2011-04-29 17:40:55" type="text"><![CDATA[]]></config>
        <config key="under_constructions_file" name="Custom html file name" description="The file name located in ROOT directory (Optional)" type="text"><![CDATA[]]></config>
        <config version="3.1.2" key="under_constructions_divider_meta" name="Meta Data" type="divider"><![CDATA[]]></config>
        <config key="under_constructions_meta_title" name="Meta Title" type="text"><![CDATA[The website is under construction]]></config>
        <config key="under_constructions_meta_description" name="Meta Description" type="textarea"><![CDATA[]]></config>
        <config key="under_constructions_meta_keywords" name="Meta Keywords" type="textarea"><![CDATA[]]></config>
    </configs>

    <updates>
        <update version="3.0.1"><![CDATA[]]></update>
        <update version="3.0.2" files="content.tpl"><![CDATA[]]></update>
        <update version="3.0.3" files="content.tpl"><![CDATA[]]></update>
        <update version="3.1.0" files="rlUnderConstruction.class.php,content.tpl,static/style.css,static/do-not-cross-line.png"><![CDATA[]]></update>
        <update version="3.1.1" files="rlUnderConstruction.class.php"><![CDATA[
            $GLOBALS['rlDb']->query("
                DELETE FROM `" . RL_DBPREFIX . "hooks`
                WHERE `Plugin` = 'underConstructions'
                AND `Name` = 'pageinfoArea'
                LIMIT 1
            ");
        ]]></update>
        <update version="3.1.2" files="rlUnderConstruction.class.php,content.tpl,i18n/ru.json,static/style.css"><![CDATA[
            $GLOBALS['rlDb']->query("
                DELETE FROM `" . RL_DBPREFIX . "lang_keys`
                WHERE `Plugin` = 'underConstructions'
                AND `Key` IN ('under_constructions_subscribe','under_constructions_email','config+name+under_constructions_module','config+name+under_constructions_divider_common')
            ");
            $GLOBALS['rlDb']->query("
                DELETE FROM `" . RL_DBPREFIX . "config`
                WHERE `Plugin` = 'underConstructions'
                AND `Key` IN ('under_constructions_module','under_constructions_divider_common')
            ");
        ]]></update>
    </updates>
</plugin>
